<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>User <%= id %> detail</title>
        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>
    <body>
        <nav>
            <span class="material-icons" onclick="location='/manager'">home</span>
            <span class="material-icons" style="float: right" onclick="location='/manager/profile'">person</span>
        </nav>
        <div type="box">
            <form>
                <h3><b>User <%= id %> detail</b></h3>
                <br>
                <p>Name: <%= user.name %> <%= user.surname %></p>
                <p>Username: <%= user.username %></p>
                <br>
                <div style="margin: 0px">
                    <p><b>Payment</b></p>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Amount</th>
                        </tr>
                        <%if(!(payment == null) && payment.length > 0){
                            payment.forEach((data) => {%>
                        <tr>
                            <%const myDate = new Date(data.date);
                            const date = ('0' + myDate.getDate()).slice(-2) + '/' + ('0' + (myDate.getMonth()+1)).slice(-2) + '/' + myDate.getFullYear();%>
                            <td><%= date %></td>
                            <td><%= data.type %></td>
                            <td>$<%= data.amount %></td>
                        </tr>
                        <%});
                        } else {%>
                        <tr>
                            <td><%= message %></td>
                            <td><%= message %></td>
                            <td><%= message %></td>
                        </tr>
                        <%}%>
                    </table>
                </div>
                <br>
                <div style="margin: 0px">
                    <p><b>Feedback</b></p>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>Detail</th>
                            <th>State</th>
                        </tr>
                        <%if(!(feedback == null) && feedback.length > 0){
                            feedback.forEach((data) => {%>
                        <tr>
                            <%const myDate = new Date(data.date);
                            const date = ('0' + myDate.getDate()).slice(-2) + '/' + ('0' + (myDate.getMonth()+1)).slice(-2) + '/' + myDate.getFullYear();%>
                            <td><%= date %></td>
                            <td type="left"><%= data.detail %></td>
                            <td><%= data.state %></td>
                        </tr>
                        <%});
                        } else {%>
                        <tr>
                            <td><%= message %></td>
                            <td><%= message %></td>
                            <td><%= message %></td>
                        </tr>
                        <%}%>
                    </table>
                </div>
                <br>
                <div style="margin: 0px">
                    <p><b>Analysis</b></p>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>Company analyzed</th>
                            <th>Stock bought</th>
                            <th>Price</th>
                        </tr>
                        <%if(!(analysis == null) && analysis.length > 0){
                            analysis.forEach((data) => {%>
                        <tr>
                            <%const myDate = new Date(data.date);
                            const date = ('0' + myDate.getDate()).slice(-2) + '/' + ('0' + (myDate.getMonth()+1)).slice(-2) + '/' + myDate.getFullYear();%>
                            <td><%= date %></td>
                            <td type="left"><%= data.company %></td>
                            <td type="left"><%= data.stock %></td>
                            <td>$<%= data.price %></td>
                        </tr>
                        <%});
                        } else {%>
                        <tr>
                            <td><%= message %></td>
                            <td><%= message %></td>
                            <td><%= message %></td>
                            <td><%= message %></td>
                        </tr>
                        <%}%>
                    </table>
                </div>
            </form>
        </div>
    </body>
</html>